{"ast":null,"code":"import _regeneratorRuntime from\"/Users/max/Desktop/work/craftframeReactJS/craftframe/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/max/Desktop/work/craftframeReactJS/craftframe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{React,useCallback,useState,useEffect}from'react';import s from'./StepEmail.module.css';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{useForm}from'react-hook-form';import{useHistory}from'react-router-dom';import useData from'../../../DataContext.js';import Email from'../../../images/leaveARequest/Email.png';import Telegram from'../../../images/leaveARequest/Telegram.png';import Whatsapp from'../../../images/leaveARequest/Whatsapp.png';import Pattern from'../../../images/reviewsImage/Pattern.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var nodemailer=require('nodemailer');var schema=yup.object().shape({email:yup.string().email('Email должен быть корректного формата').required('Поле обязательно для заполнения')});var StepEmail=function StepEmail(){var _useData=useData(),data=_useData.data,setValues=_useData.setValues;{console.log(data.name);}var history=useHistory();var entries=Object.entries(data);var _useForm=useForm({defaultValues:{email:data.email},mode:'onBlur',resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var transporter=nodemailer.createTransport({host:'smtp.mail.ru',port:465,secure:true,auth:{user:'maksim.dimitrak@mail.ru',pass:'1829310Aa!'}});var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return transporter.sendMail({from:\"Craftframe-WebSite <maksim.dimitrak@mail.ru>\",to:'craftframe.studio@gmail.com',subject:'Заявка с сайта',text:\"\".concat(data.name,\" \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u043B \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443,<br/>\\n        \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430: \").concat(data.telNumber,\",<br/>\\n        \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439 \\u043C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440 \\u0434\\u043B\\u044F \\u0441\\u0432\\u044F\\u0437\\u0438: \").concat(data.messanger,\",<br/>\\n        \\u043F\\u043E\\u0447\\u0442\\u0430:\").concat(data.email,\"\\n        \")});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(){return _ref.apply(this,arguments);};}();// async () => {\n//     const formData = new FormData();\n//     entries.forEach(entry => {\n//         formData.append(entry[0], entry[1])\n//     })\n// const res = await fetch('',{\n//     method:'POST',\n//     body:formData()\n// })\n// if (res.status == 200){\n//     console.log('goofd');\n// }else{\n//     console.log('bad')\n// }\n//}\nreturn/*#__PURE__*/_jsxs(\"div\",{className:s.stemEmail,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.titleSpan,children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443, \\u0438 \\u043C\\u044B \\u0441 \\u0432\\u0430\\u043C\\u0438 \\u0441\\u0432\\u044F\\u0436\\u0435\\u043C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:s.secondTitleSpan,children:/*#__PURE__*/_jsx(\"span\",{className:s.secondTitleSpan,children:\"*\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0439 \\u0448\\u0430\\u0433. \\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0443 \\u043F\\u043E\\u0447\\u0442\\u0443 :)\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",{ref:register,className:s.inputEmail,name:\"email\",lable:\"Email\",type:\"text\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:s.fieldButton,type:\"submit\",children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"})]}),/*#__PURE__*/_jsx(\"div\",{className:s.footerSpan,children:\"\\u0412\\u044B \\u0442\\u0430\\u043A\\u0436\\u0435 \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u043D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043D\\u0430\\u043C\"}),/*#__PURE__*/_jsx(\"div\",{className:s.secondFooterSpan,children:\"\\u0441\\u0430\\u043C\\u043E\\u0441\\u0442\\u043E\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E:\"}),/*#__PURE__*/_jsxs(\"div\",{className:s.footerImg,children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://telegram.me/anna_dimitrak\",children:/*#__PURE__*/_jsx(\"img\",{src:Telegram})}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:craftframe.studio@gmail.com\",children:/*#__PURE__*/_jsx(\"img\",{src:Email})}),/*#__PURE__*/_jsx(\"a\",{href:\"https://wa.me/+79175850248\",children:/*#__PURE__*/_jsx(\"img\",{src:Whatsapp})})]}),/*#__PURE__*/_jsx(\"div\",{className:s.footerPattern,children:/*#__PURE__*/_jsx(\"img\",{src:Pattern})})]});};export default StepEmail;","map":{"version":3,"sources":["/Users/max/Desktop/work/craftframeReactJS/craftframe/src/components/LeaveARequest/StepEmail/StepEmail.jsx"],"names":["React","useCallback","useState","useEffect","s","yupResolver","yup","useForm","useHistory","useData","Email","Telegram","Whatsapp","Pattern","nodemailer","require","schema","object","shape","email","string","required","StepEmail","data","setValues","console","log","name","history","entries","Object","defaultValues","mode","resolver","register","handleSubmit","errors","transporter","createTransport","host","port","secure","auth","user","pass","onSubmit","sendMail","from","to","subject","text","telNumber","messanger","stemEmail","titleSpan","secondTitleSpan","inputEmail","fieldButton","footerSpan","secondFooterSpan","footerImg","footerPattern"],"mappings":"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","sourcesContent":["import { React, useCallback, useState, useEffect } from 'react';\nimport s from './StepEmail.module.css';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport {useHistory } from 'react-router-dom';\nimport useData from '../../../DataContext.js';\nimport Email from '../../../images/leaveARequest/Email.png';\nimport Telegram from '../../../images/leaveARequest/Telegram.png';\nimport Whatsapp from '../../../images/leaveARequest/Whatsapp.png';\nimport Pattern from '../../../images/reviewsImage/Pattern.png';\n\nconst nodemailer = require('nodemailer');\n\nconst schema = yup.object().shape({\n    email: yup\n    .string()\n    .email('Email должен быть корректного формата')\n    .required('Поле обязательно для заполнения')\n})\n\nconst StepEmail = () => {\n\n    const {data, setValues} = useData()\n    {console.log(data.name)}\n    const history = useHistory();\n\n    const entries = Object.entries(data)\n\n    const { register, handleSubmit, errors } = useForm({\n        defaultValues: {email:data.email},\n        mode: 'onBlur',\n        resolver: yupResolver(schema),\n    })\n\n    const transporter = nodemailer.createTransport({ \n        host:'smtp.mail.ru',\n        port:465,\n        secure:true,\n        auth: {\n            user: 'maksim.dimitrak@mail.ru',\n            pass:'1829310Aa!'\n        },\n    });\n\n    const onSubmit = async ()=> await transporter.sendMail({\n        from:\"Craftframe-WebSite <maksim.dimitrak@mail.ru>\",\n        to:'craftframe.studio@gmail.com',\n        subject:'Заявка с сайта',\n        text:`${data.name} оставил заявку,<br/>\n        номер телефона: ${data.telNumber},<br/>\n        удобный мессенджер для связи: ${data.messanger},<br/>\n        почта:${data.email}\n        `\n    })\n\n\n    // async () => {\n    //     const formData = new FormData();\n\n    //     entries.forEach(entry => {\n    //         formData.append(entry[0], entry[1])\n    //     })\n    // const res = await fetch('',{\n    //     method:'POST',\n    //     body:formData()\n    // })\n    // if (res.status == 200){\n    //     console.log('goofd');\n    // }else{\n    //     console.log('bad')\n    // }\n\n    //}\n\n\n    return (\n        <div className={s.stemEmail}>\n           <div className={s.titleSpan}> <span >Оставьте заявку, и мы с вами свяжемся</span></div>\n           <div className={s.secondTitleSpan}><span className={s.secondTitleSpan}>*Последний шаг. Укажите вашу почту :)</span></div>\n           <form onSubmit={handleSubmit(onSubmit)}>\n               <input \n               ref={register}\n               className={s.inputEmail}\n               name='email'\n               lable='Email'\n               type='text'\n               required\n               >\n               </input>\n               <button className={s.fieldButton} type='submit'>Оставить заявку</button>\n           </form>\n              \n            <div className={s.footerSpan}>Вы также можете написать нам</div>\n       <div className={s.secondFooterSpan}>самостоятельно:</div>\n       <div className={s.footerImg}>\n           <a href='https://telegram.me/anna_dimitrak'><img src={Telegram}></img></a>\n           <a href='mailto:craftframe.studio@gmail.com'><img src={Email}></img></a>\n           <a href='https://wa.me/+79175850248'><img src={Whatsapp}></img></a>\n       </div>\n       <div className={s.footerPattern}><img src={Pattern}/></div>\n        </div>\n    );\n};\nexport default StepEmail;"]},"metadata":{},"sourceType":"module"}